<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>How to link the library with a new solver?</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head><body>
<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('a00018.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">How to link the library with a new solver? </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This part assumes the reader went through the <a class="el" href="a00017.html">Design choices and libraries' internals</a> page and is familiar with the user interface.</p>
<h2><a class="anchor" id="tutorial"></a>
Intregrating a solver step by step.</h2>
<h3><a class="anchor" id="prereq"></a>
Pre-requesite</h3>
<p>The first step is determining if there is any interest in integrating the solver.</p>
<p>The solver should target one of the following optimization problems: </p>
<ul>
<li>
Nonlinear optimization </li>
<li>
Linear optimization </li>
</ul>
<p>...with or without constraints.</p>
<p>It should also support bounds and scales. If not, emulating them should be possible.</p>
<p>Integrating solvers that solve very different problems will likely not match the interface and lead to major change in the package. These changes are beyond the scope of this document and should be discussed on the mailing-list.</p>
<h3><a class="anchor" id="pkg"></a>
Modifying the package.</h3>
<p>Basically, adding a new solver means adding a new leaf in the solver hierarchy.</p>
<p>The new header and source files should be added in the <code>src</code> directory.</p>
<p>The naming convention is CamlCase, the name should be the solver's name suffixed by <code>Solver</code>.</p>
<p>This plug-in must be provided as a separate package to avoid cluttering RobOptim Core with useless dependencies.</p>
<h3><a class="anchor" id="impl"></a>
Implementing the bridge.</h3>
<p>The first step is choosing from which <code>Solver</code> you want to inherit from. The <code>F</code> parameter should be straightforward: it is the kind of objective function you expect. For the constraints, there are two cases: </p>
<ul>
<li>
If there is a unique constraint type: set <code>C</code> to <code>const MyConstraintType*</code> where <code>MyConstraintType</code> is the solver's constraints type. </li>
<li>
If you want to discriminate your constraints into different categories, you will have to use a Boost.Variant. <code>C</code> should be: <code>boost::variant&lt;const MyConstraintType1*, const MyConstraintType2*&gt; </code> </li>
</ul>
<p>Then, the <code>solve</code> method should be implemented in the bridge.</p>
<p>Following guidelines should be respected by any bridge: </p>
<ul>
<li>
Be sure to call <code>reset</code> if the result has to be recomputed the next time <code>getMinimum</code> is called. </li>
<li>
Be sure that <code>solve</code> puts the computed value in the <code>result_</code> attribute. </li>
<li>
Solver's arguments should be exposed to users through the class. </li>
<li>
The solver should not display anything by default. If possible, use the <code>print</code> method to display internal states. </li>
</ul>
<h3><a class="anchor" id="ccl"></a>
Conclusion</h3>
<p>The dummy solver can be a good starting point for anyone who wants to add a new solver as the code can be considered as the minimum stub to get a compilable bridge. It should also be quite easy to understand.</p>
<p>If you write a new bridge, please post an annoucement to the RobOptim Google group. </p>
</div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">User manual</a>      </li>
</body>
</html>
